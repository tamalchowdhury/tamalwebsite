"use strict";(self.webpackChunktamalweb=self.webpackChunktamalweb||[]).push([[5978],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=u(n),d=r,m=h["".concat(l,".").concat(d)]||h[d]||c[d]||i;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9331:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return u},assets:function(){return p},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),o=["components"],s={slug:"fruit-ninja-facts",title:"Fruit Ninja Random Fruit Facts API Built with Pure Node.js",authors:"tamalweb",tags:["nodejs","project"]},l=void 0,u={permalink:"/tamalwebsite/fruit-ninja-facts",editUrl:"https://github.com/tamalweb/tamalwebsite/tree/master/blog/2019/11-5-fruit-ninja-facts/index.md",source:"@site/blog/2019/11-5-fruit-ninja-facts/index.md",title:"Fruit Ninja Random Fruit Facts API Built with Pure Node.js",description:"I started learning how to work with pure Node webserver (without Express or any other packages) The best way to solidify the learning is to build something with the knowledge. However, with the limited scope of the lesson, I couldn\u2019t find a project to build.",date:"2019-11-05T00:00:00.000Z",formattedDate:"November 5, 2019",tags:[{label:"nodejs",permalink:"/tamalwebsite/tags/nodejs"},{label:"project",permalink:"/tamalwebsite/tags/project"}],readingTime:2.945,truncated:!0,authors:[{name:"Tamal Web",title:"Frontend Engineer, author of this blog",url:"/about",imageURL:"/img/tamalweb.jpg",key:"tamalweb"}],prevItem:{title:"How I made The Periodic Table with CSS Grid and React",permalink:"/tamalwebsite/periodic-table-reactjs"},nextItem:{title:"These 7 Tips Will Make You A Super Productive Programmer",permalink:"/tamalwebsite/super-productive"}},p={authorsImageUrls:[void 0]},c=[],h={toc:c};function d(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"I started learning how to work with pure Node webserver (without Express or any other packages) The best way to solidify the learning is to build something with the knowledge. However, with the limited scope of the lesson, I couldn\u2019t find a project to build."),(0,i.kt)("p",null,"I\u2019m playing Fruit Ninja these days. After every round, it shows interesting fruit facts. I got an idea to make an API that will display random fruit facts in JSON format. This way I can put my knowledge to use while building something fun."),(0,i.kt)("p",null,"I built this simple API which shows interesting fruit facts in JSON format. When you type in ",(0,i.kt)("inlineCode",{parentName:"p"},"localhost:3000/apple")," or any other available fruits, it will spit out this data."),(0,i.kt)("p",null,"The API is simple yet sophisticated. This is the first time I\u2019m building a URL slug which acts as a variable. It\u2019s the same as ",(0,i.kt)("inlineCode",{parentName:"p"},"/:fruit")," in express.js."),(0,i.kt)("p",null,"I suggest you ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/tamalweb/fruit-facts/blob/master/index.js"},"open the up the code")," and follow along with this post."),(0,i.kt)("p",null,"The idea is to take the full URL ",(0,i.kt)("inlineCode",{parentName:"p"},"http://localhost:3000/mango")," and split it into parts. Then I take the path /mango and strip out any slashes to get a final clean trimmed path mango after which I can match the slug against my route handlers. I learned this way doing it from Pirple\u2019s Node Masterclass course."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"let parsedUrl = url.parse(req.url, true)\nlet trimmedPath = parsedUrl.pathname.replace(/^\\/|\\/+$/g, '')\nif (!trimmedPath) trimmedPath = 'index'\n")),(0,i.kt)("p",null,"I collected these fruit facts from a wiki page. I will write about how I scrapped those facts with JavaScript in another post."),(0,i.kt)("p",null,"I create an array of available fruits. Many fruits have more than one fact so I created an object of fruits with an array of facts for every fruit:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},"apple: [\n    'The average person eats 65 apples per year',\n    'Apple seeds are mildly poisonous, but not enough to be dangerous to humans',\n    'There are over 10,000 varieties of apples grown around the world',\n    \"25% of an apple's volume is air, that\u2019s why they float\",\n    'Over 60 million tons of apples are grown worldwide annually'\n  ],\n")),(0,i.kt)("p",null,"Other than the fruit facts, the API also has 3 additional pages \u2014 the homepage, a not found page, and a help page. First I check if the given URL slug is a matching fruit. If it\u2019s a matching fruit, it will serve the fruit handler with the given fruit. If it doesn\u2019t include a matching fruit but matches the other handlers, it will serve them accordingly:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"let chosenHandler\n\nif (fruits.includes(trimmedPath)) {\n  chosenHandler = handlers.fruit\n} else {\n  chosenHandler =\n    typeof router[trimmedPath] !== 'undefined'\n      ? router[trimmedPath]\n      : handlers.notFound\n}\n")),(0,i.kt)("p",null,"Then all is left to do is to call the chosenHandler function and pass in the callback function:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"  chosenHandler(trimmedPath, function(statusCode, payload) {\n    statusCode = typeof statusCode === 'number' ? statusCode : 200;\n    payload = typeof payload === 'object' ? payload : {};\n    let payloadString = JSON.stringify(payload);\n    // Send the response\n    res.setHeader('Content-Type', 'application/json');\n    res.writeHead(statusCode);\n    res.end(payloadString);\n  });\n});\n")),(0,i.kt)("p",null,"We use the native http package to create a web server. The server is built using http.createServer. The createServer function takes a callback where we can handle requests and serve fruit facts or other pages from ",(0,i.kt)("inlineCode",{parentName:"p"},"chosenHandler"),". We then listen to port 3000 using server.listen."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const server = http.createServer(function(req, res) {\n// Callback to handle requests with chosenHandler\n}\nserver.listen(3000, () => { console.log('Server started') })\n")),(0,i.kt)("p",null,"You can tinker with the code on my Github page. I suggest you install the JSON viewer extension to see the JSON in a nice formatted way."))}d.isMDXComponent=!0}}]);