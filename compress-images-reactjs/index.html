<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="TamalWeb RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="TamalWeb Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="TamalWeb JSON Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44799005-8","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><title data-react-helmet="true">Best Practices on How to Compress Images For Reactjs | TamalWeb</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://tamalweb.com/compress-images-reactjs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Best Practices on How to Compress Images For Reactjs | TamalWeb"><meta data-react-helmet="true" name="description" content="In this quick tutorial, I will walk you through some of the best ways you can compress images for Reactjs for huge performance wins."><meta data-react-helmet="true" property="og:description" content="In this quick tutorial, I will walk you through some of the best ways you can compress images for Reactjs for huge performance wins."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-12-04T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="/about"><meta data-react-helmet="true" property="article:tag" content="reactjs,performance"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://tamalweb.com/compress-images-reactjs"><link data-react-helmet="true" rel="alternate" href="https://tamalweb.com/compress-images-reactjs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://tamalweb.com/compress-images-reactjs" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.63d1e116.css">
<link rel="preload" href="/assets/js/runtime~main.789ae13d.js" as="script">
<link rel="preload" href="/assets/js/main.6400a0e5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Tamalweb Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.png" alt="Tamalweb Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">TamalWeb</b></a><a class="navbar__item navbar__link" href="/start">Start Web Dev</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a class="navbar__item navbar__link" href="/portfolio">Portfolio</a><a class="navbar__item navbar__link" href="/work-with-me">Work With Me</a><a class="navbar__item navbar__link" href="/archive">Archive</a><a class="navbar__item navbar__link" href="/about">About</a><a class="navbar__item navbar__link" href="/contact">Contact</a></div><div class="navbar__items navbar__items--right"><a href="https://twitter.com/tamalweb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://linkedin.com/in/tamalweb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/compress-images-reactjs">Best Practices on How to Compress Images For Reactjs</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/google-analytics-with-reactjs">How to Add the New Google Analytics 4 in Reactjs App</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/null-javascript">What is null in JavaScript?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/what-is-nodejs">What is Node JS? Explained in Simple Terms For Beginners</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/learn-javascript-before-nodejs">Should I Learn JavaScript Before Learning Node JS?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/which-nodejs-version">Which Node JS Version Should I Use?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/why-expressjs-in-nodejs">Why Express JS is Used in Node JS?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/how-much-time-nodejs">How Much Time Does it Take to Learn Node JS for Beginners?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/is-nodejs-programming-language">Is Node JS a Programming Language?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/what-language-for-social-network">What Language Should I Learn to Build a Social Network?</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/periodic-table-reactjs">How I made The Periodic Table with CSS Grid and React</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/fruit-ninja-facts">Fruit Ninja Random Fruit Facts API Built with Pure Node.js</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/super-productive">These 7 Tips Will Make You A Super Productive Programmer</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/share-passwords-with-your-developer">How to Share Passwords With Your Developer</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/javascript-closure-quickly-explained">JavaScript Closure Quickly Explained</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/how-to-properly-handle-your-users-passwords">How To Properly Handle Your User’s Passwords</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/specializing-in-javascript">Specializing in JavaScript</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/thoughts-after-building-a-reddit-clone-in-mern-node-react">Thoughts after Building a Reddit Clone in MERN (Node &amp; React)</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/finally-i-got-to-build-a-mern-stack-application">Finally I got to Build a MERN Stack Application!</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/node-js-is-like-my-wife-and-i-am-getting-bored-with-her">Node.js is like My Wife and I am Getting Bored with Her :(</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/thoughts-after-building-a-twitter-clone-in-node-js">Thoughts After Building a Twitter Clone in Node.js</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/why-i-am-not-a-fanboy-of-javascript">Why I am not a Fanboy of JavaScript</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/deleting-an-item-from-mongodb-mongoose-by-user-permission">Deleting an Item From MongoDB Mongoose By User Permission</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/things-i-learned-while-building-a-personal-project">Things I Learned While Building a Personal Project</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/quitting-is-important">Quitting is important</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/roasting-my-first-javascript-app">Roasting My First JavaScript App</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/what-steve-jobs-first-iphone-taught-me-about-product-development">What Steve Jobs’ First iPhone Taught Me About Product Development</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/i-never-thought-i-would-become-a-programmer-one-day">I Never Thought I Would Become A Programmer One Day</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Best Practices on How to Compress Images For Reactjs</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2021-12-04T00:00:00.000Z" itemprop="datePublished">December 4, 2021</time> · <!-- -->9 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_8c0z"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link avatar__photo" href="/about"><img class="image_9q7L" src="/img/tamalweb.jpg" alt="Tamal Web"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a itemprop="url" href="/about"><span itemprop="name">Tamal Web</span></a></div><small class="avatar__subtitle" itemprop="description">Frontend Engineer, author of this blog</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>In this quick tutorial, I will walk you through some of the best ways you can compress images for Reactjs for huge performance wins.</p><p><img alt="featured image" src="/assets/images/compress-images-7a341e62f7dfa2435416c6c89c65a611.png"></p><p>As you can see on the cover image, the original file was 65 kB, and after compression, I got it down to 5 KB, that’s over 80% saving for just one image file.</p><p>This file is from one of my side projects ReactionPoll, where I make use of a bunch of Facebook and Linkedin reaction icons. My original reaction set for Facebook was 155 kB and after optimizing them, I got it to just 35 kB!</p><p>Let’s begin with the obvious,</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="import-images-into-your-react-source-code">Import images into your React source code<a class="hash-link" href="#import-images-into-your-react-source-code" title="Direct link to heading">​</a></h2><p>The first quick win is to always import your images in your source code.</p><p>Add the images into the src directory. For me, I created a folder called img inside the src folder and put all the image assets inside.</p><p>Now from your component files, just type in</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">like</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../img/src/like.png&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You can insert this image in the src attribute in the img tag like this:</p><div class="codeBlockContainer_J+bg language-js theme-code-block"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">like</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;like icon&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When you import images this way, create-react-app (or webpack) will bundle all your images and try to best compress them.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Note</h5></div><div class="admonition-content"><p>Don’t put your images in the <code>/public</code> directory and hotlink them, unless you have a strong reason to do so (Hadar, 2021).</p></div></div><p>If your images are less than 10 kB (10,000 bytes) these images will be converted into inline base 64 strings. So they will load instantly (Llobera, 2020).</p><p>See this love icon is 4.5 kB (less than 10 kB) and converted as a data URL:</p><p><img alt="images converted to data url" src="/assets/images/1-80385a578d72ffd2b15094f0992a9ac9.png"></p><p>But when your images are over 10 KB, for example, this care reaction icon is 14 kB, react will link to the asset file.</p><p><img alt="source image" src="/assets/images/2-d50f74ca0e68f48476c75c2b0ad7fb1c.png"></p><p>Did you know about the inline image thing? I didn’t. Tweet this to your followers,</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If your image is under 10 kB, Create React App will turn them into base64 data strings, making them load instantly!</p></div></div><p>To further compress these source images, we have to optimize them ourselves,</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="compress-your-source-images-using-tinypng">Compress Your Source Images Using TinyPNG<a class="hash-link" href="#compress-your-source-images-using-tinypng" title="Direct link to heading">​</a></h2><p>TinyPNG is an online tool I use to compress images. Usually optimized PNG and JPGs have a small file size already, but when I run these images against this free tool, I get surprised that it squeezes up even more.</p><p><img alt="tiny png" src="/assets/images/3-16dc37152d969b0422b79f36adc94e5c.jpg"></p><p>I saw a 68% savings when compressing my reaction icon pngs using TinyPNG.</p><p>Compressed JPG and PNGs can only take you so far. If you want to really up your compression game, you need to find an even better image format: webp and avif.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="use-webpavif-images-for-even-better-compression">Use Webp/Avif Images for Even Better Compression<a class="hash-link" href="#use-webpavif-images-for-even-better-compression" title="Direct link to heading">​</a></h2><p>Webp (weppy) is a new fast image format developed by Google. If weppy is fast, then AVIF is faster. In my ReactionPoll tool, I used weppy images to further compress my images.</p><p><img alt="webp image converter" src="/assets/images/4-7c8a48b3d6eebf99b978d9e00ed4f47d.png"></p><p>What I did was to replace all images with their webp counterparts.</p><p>There is a weppy converter tool called cwebp that I downloaded and installed into my computer, but I was too lazy to compress them in CLI. So I used an online converter to convert my existing PNG files to webp.</p><p>The weppy versions helped cut down around 20% more file sizes from my already compressed PNG files.</p><p>You should keep in mind that, weppy and avif are newer file formats and not available in older browsers. It’s a good idea to serve webp but also fall back to the jpg/pngs.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="use-webp-and-png-together-with-fallbacks">Use Webp and PNG together with Fallbacks<a class="hash-link" href="#use-webp-and-png-together-with-fallbacks" title="Direct link to heading">​</a></h2><p>Using the <code>&lt;picture&gt;</code> tag we can add both webp and png files. The browser will pick the image that it supports.</p><p>The tag looks like this:</p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> likePng </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../img/src/like.png&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> likeWebp </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../img/src/like.webp&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">likeWebp</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">image/webp</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">likePng</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">like button</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>I learned how to use this trick + how to use a reusable react component to automate the process using Josh’s blog post.</p><p>Basically what he did was create a component called <code>ImgWithFallback</code></p><div class="codeBlockContainer_J+bg language-jsx theme-code-block"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ImgWithFallback </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  src</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fallback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;image/webp&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">delegated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcSet</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">src</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">type</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript" style="color:#00009f">fallback</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag spread punctuation" style="color:#393A34">{</span><span class="token tag spread punctuation" style="color:#393A34">...</span><span class="token tag spread attr-value" style="color:#e3116c">delegated</span><span class="token tag spread punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This component will take the webp image as the src and the png as the fallback image.</p><p>Use webp/avif images for faster loading but also have a fallback to png/jpeg files using a <code>&lt;picture&gt;</code> tag.</p><p>After adding the WEBPs, I can say my images are loading much quicker than PNGs.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="my-results">My Results<a class="hash-link" href="#my-results" title="Direct link to heading">​</a></h2><p>I started with original reaction icons that I downloaded from the internet. After resizing all the icons into 250×250 png images, the total file size for the seven icons was 155 kB.</p><p><img alt="compression results" src="/assets/images/5-15b1fd7d6125f7f882768035fa0681ca.png"></p><p>After compressing the PNGs with TinyPNG service, I ended up with 50 kB file size for all of them.</p><p>Finally, when I converted them to webp file format, I ended up with 35 kB file size, that leaves 5 kB per image icon.</p><p>Now you must be looking at the picture above and thinking, why the weppy images look pixelated? I don’t know why it is displaying like this on my computer, but when I open both icons side by side, I can say they look fine,</p><p><img alt="side by side comparison" src="/assets/images/6-5e096d8c9870b019df054ea8563d5f3d.jpg"></p><p>By the way, all these icons you see are part of my Linkedin and Facebook reaction poll generator. If you want to check out my project in action and how the images perform, visit ReactionPoll.com/facebook</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="final-thoughts">Final Thoughts<a class="hash-link" href="#final-thoughts" title="Direct link to heading">​</a></h2><p>Image compression and performance optimization is ongoing thing. As time goes, we will surely find out more ways to shave off those extra kilobytes without compromising the quality. When that happens, I will update this article with newer tricks as I learn them.</p><p>Till then start optimizing your react website and send me a tweet if you found this post useful.</p><p><strong>To recap what we learned so far:</strong></p><ul><li>Always import your images in reactjs</li><li>Compress your assets using a tool like TinyPNG (it also works with jpegs)</li><li>Use webp and avif image formats for fast loading but also have fallbacks for the browsers that don’t support them</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="references">References<a class="hash-link" href="#references" title="Direct link to heading">​</a></h2><ol><li>Hadar, A. (2021) Using the Public Folder, Retrieved December 4, 2021, from <a href="https://create-react-app.dev/docs/using-the-public-folder" target="_blank" rel="noopener noreferrer">https://create-react-app.dev/docs/using-the-public-folder</a></li><li>Llobera, L. (2020) Adding Images, Fonts, and Files, Retrieved Decmber 4, 2021, from <a href="https://create-react-app.dev/docs/adding-images-fonts-and-files" target="_blank" rel="noopener noreferrer">https://create-react-app.dev/docs/adding-images-fonts-and-files</a></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="comments">Comments:<a class="hash-link" href="#comments" title="Direct link to heading">​</a></h2><p><strong>Cindy Lam:</strong> Hi Tamal, This is such a great and well-written article. I can tell you put a lot of effort and thoughts into writing this blog post. I really like the flow of the entire post. The use of screenshots and images are really helping you to tell your story. To me, as a reader, I do not feel exhausted reading through it and I even get some surprises like the “tweet” option for me to easily tweet what I have learned from your blog post to others. Fast and convenient! More importantly, I really like the “table of contents” and the recaps at the end of the blog post.</p><p>Here are some of my opinions and suggestions that hopefully can help you out to improve the current blog post (I am just writing down what I hope to see as a reader when reading through the blog post):</p><p>(1) The “Care Reaction” icon compression results in using TinyPNG and Webp methods – I know you have displayed screenshots regarding the file size of the care reaction before compression. I think it would be helpful to see this throughout all the other sections to see the progression of the compression. It gives readers more excitement when they are able to see the result immediately after reading sections 2 and 3.</p><p>(2) Included the “Can I use” link for Webp and AVIF – ie, <a href="https://caniuse.com/?search=webP%20image%20format" target="_blank" rel="noopener noreferrer">can i use</a> so the reader can click on the link and directly see the browser compatibility of these two image types.</p><p>(3) For Josh’s blog post, I think it would be best if you could just link directly to the <a href="https://www.joshwcomeau.com/performance/embracing-modern-image-formats/#abstraction-with-react" target="_blank" rel="noopener noreferrer">“Abstraction with React”</a>. As a reader, I do not need to scroll all the way down to the source code.</p><p>The above items are just my opinions and hopefully, they can be slightly helpful to you if you are looking for optimization.</p><p>By the way, I have found a small typo in section 3 the last paragraph right after the bold text, you have Webp spelled incorrectly.</p><p>Overall, I really enjoy reading this post and learning something new regarding image compression! Great post, Tamal!</p><blockquote><p>Tamal: Hey Cindy, thank you for a very thoughtful comment.</p><p>Let me write some quick responses to your points below:</p><ol><li>You are right. Gonna update with some more before/after screenshots.</li><li>Good idea! I am gonna put them.</li><li>Sure, will add the direct link.
Typo: I intentionally wrote Weppy -it’s like a human-friendly &gt;name of the technical WebP.</li></ol></blockquote><p><strong>Jose Oropeza</strong>: Excellent article Tamal. I honestly never considered image compression but will surely give this a try on a future project, specially since image quality is not compromised. Would love to see an article on best practices for optimizing gifs.</p><blockquote><p>Tamal: Definitely! Google web dev recommends web video in place of gifs to save data. But I’ll def look into it.</p></blockquote><p><strong>Christiaan:</strong> So if I understand it correctly all images below 10k are in lined. So in the last step both the PNG and webp are in lined.
So aren’t you shipping 35Kb more in the last example?</p><blockquote><p>Tamal: Only pngs are getting inlined, so in the last step, I am keeping both webp and png because of backwards compatibility.</p></blockquote></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_xD8n"><div class="col"><b>Tags:</b><ul class="tags_NBRY padding--none margin-left--sm"><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/reactjs">reactjs</a></li><li class="tag_F03v"><a class="tag_WK-t tagRegular_LXbV" href="/tags/performance">performance</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/tamalweb/tamalwebsite/tree/master/blog/2021/12-4-compress-images-reactjs/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/google-analytics-with-reactjs"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">How to Add the New Google Analytics 4 in Reactjs App<!-- --> »</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#import-images-into-your-react-source-code" class="table-of-contents__link toc-highlight">Import images into your React source code</a></li><li><a href="#compress-your-source-images-using-tinypng" class="table-of-contents__link toc-highlight">Compress Your Source Images Using TinyPNG</a></li><li><a href="#use-webpavif-images-for-even-better-compression" class="table-of-contents__link toc-highlight">Use Webp/Avif Images for Even Better Compression</a></li><li><a href="#use-webp-and-png-together-with-fallbacks" class="table-of-contents__link toc-highlight">Use Webp and PNG together with Fallbacks</a></li><li><a href="#my-results" class="table-of-contents__link toc-highlight">My Results</a></li><li><a href="#final-thoughts" class="table-of-contents__link toc-highlight">Final Thoughts</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li><li><a href="#comments" class="table-of-contents__link toc-highlight">Comments:</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/archive">Blog Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/rss.xml">RSS</a></li><li class="footer__item"><a class="footer__link-item" href="/atom.xml">Atom</a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items"><li class="footer__item"><a href="https://reactionpoll.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reaction Poll<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://periodictable.website" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Periodic Table<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/tamalweb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/tamalweb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://linkedin.com/in/tamalweb" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 TamalWeb, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.789ae13d.js"></script>
<script src="/assets/js/main.6400a0e5.js"></script>
</body>
</html>